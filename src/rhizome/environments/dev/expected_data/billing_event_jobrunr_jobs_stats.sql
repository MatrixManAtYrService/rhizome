CREATE ALGORITHM=UNDEFINED DEFINER=`billing-event`@`%` SQL SECURITY DEFINER VIEW `jobrunr_jobs_stats` AS select coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` is null))),0) AS `total`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'SCHEDULED'))),0) AS `scheduled`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'ENQUEUED'))),0) AS `enqueued`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'PROCESSING'))),0) AS `processing`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'FAILED'))),0) AS `failed`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'SUCCEEDED'))),0) AS `succeeded`,coalesce((select cast(cast(`jm`.`value` as char(10) charset utf8mb4) as decimal(10,0)) from `jobrunr_metadata` `jm` where (`jm`.`id` = 'succeeded-jobs-counter-cluster')),0) AS `allTimeSucceeded`,coalesce(max((select `job_stat_results`.`count` from DUAL  where (`job_stat_results`.`state` = 'DELETED'))),0) AS `deleted`,(select count(0) from `jobrunr_backgroundjobservers`) AS `nbrOfBackgroundJobServers`,(select count(0) from `jobrunr_recurring_jobs`) AS `nbrOfRecurringJobs` from (select `jobrunr_jobs`.`state` AS `state`,count(0) AS `count` from `jobrunr_jobs` group by `jobrunr_jobs`.`state` with rollup) `job_stat_results`